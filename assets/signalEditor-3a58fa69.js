import{u as p}from"./index-a9b4382e.js";import{m as k}from"./data-a918d6f6.js";import{s as L,a as B,b as I}from"./data-e476af8b.js";import{w as S,r,c as y}from"./index-98e27a79.js";S(L);const l=r(k.roomInfo),t=r(k.wallInfo),i=r(k.drawWallInfo),v=r(I.handelBtnList),o=r(k.doorWindowInfo),c=p(),f=y(()=>c.modelType);class T{constructor(){this.setupEventListeners()}setupEventListeners(){window.editor.list.cancelTool.add(()=>{c.changeShowModelInfo(!1,"drawWall"),window.editor.toolType="free"}),window.editor.list.showModelMsg.add(e=>{if(c.resetGlobalObj(),e){switch(c.changeShowModelInfo(!0,e.type),e.type){case"room":e.rotationLock?(l.value[4].icon="sisuo",l.value[4].class="checkedButton",l.value[4].lock=e.rotationLock):(l.value[4].icon="weisuoding",l.value[4].class="orangeButton",l.value[4].lock=e.rotationLock),e.positionLock?(l.value[3].icon="sisuo",l.value[3].class="checkedButton",l.value[3].lock=e.positionLock):(l.value[3].icon="weisuoding",l.value[3].class="orangeButton",l.value[3].lock=e.positionLock),e.isCloneIng?l.value[1].class="checkedButton":l.value[1].class="orangeButton";break;case"wall":e.lengthLock?(t.value[2].icon="sisuo",t.value[2].class="checkedButton",t.value[2].lock=e.lengthLock):(t.value[2].icon="weisuoding",t.value[2].class="orangeButton",t.value[2].lock=e.lengthLock),e.positionLock?(t.value[3].icon="sisuo",t.value[3].class="checkedButton",t.value[3].lock=e.positionLock):(t.value[3].icon="weisuoding",t.value[3].class="orangeButton",t.value[3].lock=e.positionLock);break;case"drawWall":e.autoCompletion?(i.value[1].class="checkedButton",i.value[1].lock=e.autoCompletion):(i.value[1].class="orangeButton",i.value[1].lock=e.autoCompletion),e.hvSwitch?(i.value[2].icon="huangshuqihuan-shu",i.value[2].class="checkedButton",i.value[2].lock=e.autoCompletion):(i.value[2].icon="huangshuqihuan-moren",i.value[2].class="orangeButton",i.value[2].lock=e.autoCompletion);break;case"door":e.positionLock?(o.value[3].icon="sisuo",o.value[3].class="checkedButton",o.value[3].lock=e.positionLock):(o.value[3].icon="weisuoding",o.value[3].class="orangeButton",o.value[3].lock=e.positionLock),e.lengthLock?(o.value[4].icon="sisuo",o.value[4].class="checkedButton",o.value[4].lock=e.lengthLock):(o.value[4].icon="weisuoding",o.value[4].class="orangeButton",o.value[4].lock=e.lengthLock),e.isCloneIng?o.value[1].class="checkedButton":o.value[1].class="orangeButton";break;case"window":e.positionLock?(o.value[3].icon="sisuo",o.value[3].class="checkedButton",o.value[3].lock=e.positionLock):(o.value[3].icon="weisuoding",o.value[3].class="orangeButton",o.value[3].lock=e.positionLock),e.lengthLock?(o.value[4].icon="sisuo",o.value[4].class="checkedButton",o.value[4].lock=e.lengthLock):(o.value[4].icon="weisuoding",o.value[4].class="orangeButton",o.value[4].lock=e.lengthLock),e.isCloneIng?o.value[1].class="checkedButton":o.value[1].class="orangeButton";break}c.$patch({globalObj:e})}else c.changeShowModelInfo(!1,e.type)}),window.editor.list.sendFloorParam.add(e=>{c.resetFloorParam(),e&&c.$patch({floorParam:e})}),window.editor.list.switchCameraIcon.add(e=>{e==="3D"?(v.value[4].name="2D",v.value[4].icon="2D"):e==="2D"&&(v.value[4].name="3D",v.value[4].icon="3D")}),window.editor.list.showToast.add((e,u="bottom")=>{let a;u==="bottom"?a=!0:u==="top"&&(a=!1),B({message:e,position:a?"bottom":"top"})}),window.editor.list.getDomByPoint.add((e,u,a,g)=>{window.editor.currentDom="",a==="touchEnd"&&(document.querySelector(".editorToolRight").style.display="block");let w=document.querySelectorAll(".construction_btn");a==="touchMove"&&(w=document.querySelectorAll(".e-r-bottom"));for(let h=0;h<w.length;h++){const m=w[h],d=m.getBoundingClientRect();if(!(e>=d.left&&e<=d.right&&u>=d.top&&u<=d.bottom))a==="touchMove"&&(document.querySelector(".editorToolRight").style.display="none");else{window.editor.currentDom=m;let s=m.getAttribute("use-type");if(a==="touchStart")if(f.value==="model"){let n='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 2000], [-2000, 2000]]}';s==="square"?n='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 2000], [-2000, 2000]]}':s==="lShape"?n='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 0], [0, 0], [0, 2000], [-2000, 2000]]}':s==="uShape"?n='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 2000], [400, 2000], [400,0], [-400, 0], [-400, 2000], [-2000, 2000]]}':s==="tShape"?n='{"roomArr":[[-2000, 2000], [-2000, 0], [-1200, 0], [-1200, -2000], [1200, -2000], [1200, 0], [2000, 0], [2000, 2000], [-2000, 2000]]}':s==="sShape"&&(n='{"roomArr":[[-2000, -2000], [600, -2000], [600, 800], [2000, 800], [2000, 2000], [-600,2000], [-600, -800], [-2000, -800], [-2000,  -2000]]}'),s!="wall"?window.editor.selCacheJson=n:window.editor.config.mobileConfig.hvSwitch?n='{"roomArr":[[-1000, 0],[1000, 0]]}':n='{"roomArr":[[0, 1000],[0, -1000]]}'}else f.value==="door"||f.value==="window"?window.editor.toolType=s:f.value;if(a==="touchMove"){const n=document.querySelector(".e-r-bottom");n.scrollTop+=g*2}a==="touchEnd"&&s==="wall"&&(window.editor.toolType=s)}}})}}export{T as default};

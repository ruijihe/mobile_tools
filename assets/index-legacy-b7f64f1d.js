System.register(["./index-legacy-511843ba.js","./index-legacy-17d3d1c7.js","./data-legacy-58c42ff5.js","./function-call-legacy-efd0205c.js"],(function(e,t){"use strict";var o,l,a,n,s,i,r,c,u,d,h,p,v,w,f,m,g,b,x,y,k,F,C,B,I,T,S,_,L,R,E,M,P,z,W,j,$,D,H,O,A,G,U,q,J,V,N,K,Q;return{setters:[e=>{o=e.a,l=e.E,a=e.F,n=e.d,s=e.G,i=e.j,r=e.m,c=e.k,u=e.t,d=e.H,h=e.i,p=e.I,v=e.w,w=e.J,f=e.q,m=e.K,g=e.c,b=e.r,x=e.L,y=e.M,k=e._,F=e.x,C=e.y,B=e.l,I=e.O,T=e.A,S=e.P,_=e.Q,L=e.R,R=e.S,E=e.T,M=e.z,P=e.U,z=e.V,W=e.B,j=e.W,$=e.X,D=e.Y,H=e.C,O=e.D,A=e.h,G=e.g,U=e.Z,q=e.$},e=>{J=e.b,V=e._},e=>{N=e.u,K=e.m},e=>{Q=e.a}],execute:function(){const[t,X]=o("cell"),Y={tag:r("div"),icon:String,size:String,title:c,value:c,label:c,center:Boolean,isLink:Boolean,border:u,required:Boolean,iconPrefix:String,valueClass:d,labelClass:d,titleClass:d,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Z=l({},Y,a);var ee=n({name:t,props:Z,setup(e,{slots:t}){const o=s(),l=()=>{if(t.label||h(e.label))return i("div",{class:[X("label"),e.labelClass]},[t.label?t.label():e.label])},a=()=>{var o;if(t.title||h(e.title)){const a=null==(o=t.title)?void 0:o.call(t);if(Array.isArray(a)&&0===a.length)return;return i("div",{class:[X("title"),e.titleClass],style:e.titleStyle},[a||i("span",null,[e.title]),l()])}},n=()=>{const o=t.value||t.default;if(o||h(e.value))return i("div",{class:[X("value"),e.valueClass]},[o?o():i("span",null,[e.value])])},r=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return i(p,{name:t,class:X("right-icon")},null)}};return()=>{var l;const{tag:s,size:c,center:u,border:d,isLink:h,required:v}=e,w=null!=(l=e.clickable)?l:h,f={center:u,required:v,clickable:w,borderless:!d};return c&&(f[c]=!!c),i(s,{class:X(f),role:w?"button":void 0,tabindex:w?0:void 0,onClick:o},{default:()=>{var o;return[t.icon?t.icon():e.icon?i(p,{name:e.icon,class:X("left-icon"),classPrefix:e.iconPrefix},null):void 0,a(),n(),r(),null==(o=t.extra)?void 0:o.call(t)]}})}}});const te=v(ee),[oe,le]=o("cell-group"),ae={title:String,inset:Boolean,border:u};var ne=n({name:oe,inheritAttrs:!1,props:ae,setup(e,{slots:t,attrs:o}){const l=()=>{var l;return i("div",f({class:[le({inset:e.inset}),{[m]:e.border&&!e.inset}]},o),[null==(l=t.default)?void 0:l.call(t)])};return()=>e.title||t.title?i(w,null,[i("div",{class:le("title",{inset:e.inset})},[t.title?t.title():e.title]),l()]):l()}});const se=v(ne),ie=n({setup(){const e=N(),t=g((()=>e.calculatorState)),o=g((()=>e.floorResult)),l=g((()=>e.calculatorType)),a=g((()=>e.calculatorValue)),n=e.updateInputArr,s=b(""),i=e.changeCalculator,r=J.keyList,c=x("px2rem"),u=e=>new Function(`return ${e}`)();let d=!0;const h=b("isInput");return y((()=>{s.value=a.value,d=!0,h.value="isInput"})),{px2rem:c,keyList:r,store:e,calculatorState:t,changeCalculator:i,floorResult:o,result:s,handleButtonClick:t=>{if("="===t.value)try{s.value=Math.floor(u(s.value)).toString()}catch(o){s.value="Error"}else if("AC"===t.value)s.value="";else if("CM"===t.value);else if("houtui"===t.icon)s.value=s.value.toString().slice(0,-1);else if("取消"===t.value);else if("OK"===t.value){try{s.value=Math.floor(u(s.value)).toString()}catch(o){s.value="Error"}"floorResult"===l.value?e.$patch({floorResult:s.value}):"roomWidth"===l.value?(e.$patch({globalObj:{width:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({roomWidth:s.value})):"roomHeight"===l.value?(e.$patch({globalObj:{height:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({roomHeight:s.value})):"wallWidth"===l.value?(e.$patch({globalObj:{width:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({wallWidth:s.value})):"wallHeight"===l.value?(e.$patch({globalObj:{height:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({wallHeight:s.value})):"point"===l.value?(e.$patch({globalObj:{angle:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({angle:s.value})):"width"===l.value?(n(l.value,s.value),window.editor.list.changeRoomByInputForMobile.dispatch({doorWidth:s.value})):"leftWidth"===l.value?(n(l.value,s.value),window.editor.list.changeRoomByInputForMobile.dispatch({doorLeftWidth:s.value})):"rightWidth"===l.value&&(n(l.value,s.value),window.editor.list.changeRoomByInputForMobile.dispatch({doorRightWidth:s.value})),i("calculator")}else""===t.value||(d&&(s.value="",d=!1,h.value=""),s.value+=t.value)},calculatorValue:a,defaultValue:d,isInput:h}}}),re={class:"calculatorState"},ce={class:"calculatorState-body"},ue={class:"key-container"},de={class:"floorInputContainer bold font-n color-n"},he=k(ie,[["render",function(e,t,o,l,a,n){const s=p,r=W;return F(),C(w,null,[B(T("div",{class:"overlay",onTouchstart:t[0]||(t[0]=S((t=>e.changeCalculator("overlay")),["stop"]))},null,544),[[I,e.calculatorState]]),B(T("div",re,[T("div",ce,[T("div",ue,[T("div",de,[B(T("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.result=t),class:_([e.isInput,"floorInput"]),disabled:""},null,2),[[L,e.result,void 0,{trim:!0}]])]),(F(!0),C(w,null,R(e.keyList,(t=>(F(),E(r,{key:t.value,color:t.color,class:_([t.class,"calculatorState-key flex-center color-n font-s"]),type:"success",onClick:o=>e.handleButtonClick(t)},{default:M((()=>[P(z(t.value)+" ",1),i(s,{size:"15",class:"iconfont buttonIcon","class-prefix":"icon",name:t.icon},null,8,["name"])])),_:2},1032,["color","class","onClick"])))),128))])])],512),[[I,e.calculatorState]])],64)}],["__scopeId","data-v-4921fdae"]]),pe={class:"modelInfo"},ve={class:"infoLeft"},we={key:0,class:"infoRight flex-start"},fe={key:0,class:"flex-start"},me={class:"font-l mh-2x"},ge={key:0,class:"flex-start"},be=T("span",{class:"mr-1x font-l"},"x",-1),xe={class:"buttonContainer flex-center"},ye={key:1,class:"flex-start"},ke=T("span",{class:"font-l mh-1x"},"墙",-1),Fe=T("span",{class:"mr-1x font-l"},"x",-1),Ce={class:"buttonContainer flex-center"},Be={key:2,class:"flex-start"},Ie=T("span",{class:"font-l mh-1x"},"角度",-1),Te={class:"buttonContainer flex-center"},Se={key:3,class:"flex-start"},_e={class:"font-l mh-1x"},Le={class:"buttonContainer flex-center"},Re=n({__name:"index",setup(e){const t=N();let o=[];const l=t.changeCalculator,a=t.changeShowModelInfo,n=g((()=>t.globalObj)),s=(e,t)=>{t.lock=!t.lock,e?(t.icon="sisuo",t.class="checkedButton"):(t.icon="weisuoding",t.class="orangeButton")};return y((()=>{"room"===n.value.type?o=b(K.roomInfo):"wall"===n.value.type?o=b(K.wallInfo):"drawWall"===n.value.type?o=b(K.drawWallInfo):"point"===n.value.type?o=b(K.angleInfo):"door"!==n.value.type&&"window"!==n.value.type||(o=b(K.doorWindowInfo))})),(e,r)=>{const c=V,u=W,d=p,h=he,v=j("router-view");return F(),C("div",pe,[i(v,null,{default:M((()=>[T("div",ve,[(F(!0),C(w,null,R($(o),(e=>(F(),E(c,{key:e.name,"class-name":e.class,"button-height":"70px",name:e.name,icon:e.icon,onTouchstart:l=>(e=>{switch(e.name){case"删除":window.editor.list.deleteForMobile.dispatch("del");break;case"位置":window.editor.list.lockUnlockForMobile.dispatch({positionLock:e.lock}),s(e.lock,o.value[3]);break;case"旋转":window.editor.list.lockUnlockForMobile.dispatch({rotationLock:e.lock}),s(e.lock,o.value[4]);break;case"长度":window.editor.list.lockUnlockForMobile.dispatch({lengthLock:e.lock}),t.$patch({globalObj:{lengthLock:e.lock}}),s(e.lock,o.value[2]);break;case"拆分墙":window.editor.list.wallOperate.dispatch({type:"splitWall"});break;case"停用补全":e.lock=!e.lock,window.editor.list.setWallParam.dispatch({autoCompletion:e.lock}),e.lock?o.value[1].class="checkedButton":o.value[1].class="orangeButton",Q({message:"此功能只适用于拖拽状态",position:"bottom"});break;case"横竖切换":e.lock=!e.lock,window.editor.list.setWallParam.dispatch({hvSwitch:e.lock}),e.lock?(o.value[2].class="checkedButton",o.value[2].icon="huangshuqihuan-shu"):(o.value[2].class="orangeButton",o.value[2].icon="huangshuqihuan-moren"),Q({message:"此功能只适用于拖拽状态",position:"bottom"});break;case"取消":a(!1,"drawWall"),window.editor.list.cancelTool.dispatch()}})(e)},null,8,["class-name","name","icon","onTouchstart"])))),128))]),"drawWall"!==n.value.type?(F(),C("div",we,["room"===n.value.type?(F(),C("div",fe,[T("span",me,z(n.value.area)+" m²",1),n.value.width?(F(),C("div",ge,[i(u,{class:"sizeButton font-l mh-2x",onTouchstart:r[0]||(r[0]=S((e=>$(l)("roomWidth",n.value.width)),["stop"]))},{default:M((()=>[P(z(n.value.width)+"mm ",1)])),_:1}),be,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[1]||(r[1]=S((e=>$(l)("roomHeight",n.value.height)),["stop"]))},{default:M((()=>[P(z(n.value.height)+"mm ",1)])),_:1})])):D("",!0),i(u,{type:"success",class:"bg-orange color-n settingButton",to:"roomSetting"},{default:M((()=>[T("div",xe,[i(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])])),_:1})])):"wall"===n.value.type?(F(),C("div",ye,[ke,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[2]||(r[2]=S((e=>!n.value.lengthLock&&$(l)("wallWidth",n.value.width)),["stop"]))},{default:M((()=>[P(z(n.value.width)+"mm ",1)])),_:1}),Fe,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[3]||(r[3]=S((e=>$(l)("wallHeight",n.value.height)),["stop"]))},{default:M((()=>[P(z(n.value.height)+"mm ",1)])),_:1}),i(u,{type:"success",class:"bg-orange color-n settingButton",to:"wallSetting"},{default:M((()=>[T("div",Ce,[i(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])])),_:1})])):"point"===n.value.type?(F(),C("div",Be,[Ie,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[4]||(r[4]=S((e=>$(l)("point",n.value.angle)),["stop"]))},{default:M((()=>[P(z(n.value.angle)+"° ",1)])),_:1}),i(u,{type:"success",class:"bg-orange color-n settingButton",to:"pointSetting"},{default:M((()=>[T("div",Te,[i(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])])),_:1})])):"door"===n.value.type||"window"===n.value.type?(F(),C("div",Se,[T("span",_e,z("door"===n.value.type?"门":"窗"),1),(F(!0),C(w,null,R(n.value.inputArr,(e=>(F(),E(u,{key:e.inputType,color:e.color,class:"sizeButton font-l mr-1x",onTouchstart:S((t=>!e.disabled&&$(l)(e.inputType,e.value)),["stop"])},{default:M((()=>[P(z(e.value),1)])),_:2},1032,["color","onTouchstart"])))),128)),i(u,{type:"success",class:"bg-orange color-n settingButton",to:"door"===n.value.type?"doorSetting":"windowSetting"},{default:M((()=>[T("div",Le,[i(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])])),_:1},8,["to"])])):D("",!0),i(h)])):D("",!0)])),_:1})])}}}),Ee={setup(){const e=N();return{exportPDF:()=>{window.editor.list.exportGLTF.dispatch("mobilePDF"),e.$patch({showExport:!1})},exportJPEG:()=>{window.editor.list.exportGLTF.dispatch("jpg"),e.$patch({showExport:!1})},showExport:g((()=>e.showExport)),closeExport:()=>{e.$patch({showExport:!1})}}}},Me=e=>(H("data-v-5106d6bb"),e=e(),O(),e),Pe={class:"export"},ze={class:"exportContainer"},We=Me((()=>T("div",{class:"font-l mb-2x"}," 导出为 ",-1))),je=Me((()=>T("span",null,"PDF 文档",-1))),$e=Me((()=>T("span",null,"JPEG 格式图片",-1))),De=k(Ee,[["render",function(e,t,o,l,a,n){const s=p;return F(),C("div",Pe,[T("div",ze,[We,T("div",{class:"font-n mb-2x",onClick:t[0]||(t[0]=e=>l.exportPDF())},[i(s,{size:"20",class:"iconfont buttonIcon mr-1x","class-prefix":"icon",name:"PDFdocument"}),je]),T("div",{class:"font-n",onClick:t[1]||(t[1]=e=>l.exportJPEG())},[i(s,{size:"20",class:"iconfont buttonIcon mr-1x","class-prefix":"icon",name:"JPEGimage"}),$e])]),T("div",{class:"exportOverlay",onClick:t[2]||(t[2]=e=>l.closeExport())})])}],["__scopeId","data-v-5106d6bb"]]),He=n({setup:()=>({})}),Oe={class:"canvas_box"},Ae=[(e=>(H("data-v-4bd0f451"),e=e(),O(),e))((()=>T("div",{id:"box"},null,-1)))],Ge=k(He,[["render",function(e,t,o,l,a,n){return F(),C("div",Oe,Ae)}],["__scopeId","data-v-4bd0f451"]]),Ue=n({name:"HandleFloor",setup:()=>({handleFloorList:J.handleFloorList})}),qe={class:"handleFloorContainer bg-orange"},Je=k(Ue,[["render",function(e,t,o,l,a,n){const s=V;return F(),C("div",qe,[(F(!0),C(w,null,R(e.handleFloorList,(e=>(F(),E(s,{key:e.name,"class-name":"orangeButton","button-height":"70px",name:e.name,icon:e.icon},null,8,["name","icon"])))),128))])}],["__scopeId","data-v-d5343487"]]),Ve=n({name:"EditorFloor",setup(){const e=x("px2rem"),t=N(),o=g((()=>t.floorResult)),l=g((()=>t.calculatorState)),a=t.changeCalculator;return{px2rem:e,calculatorState:l,store:t,changeCalculator:a,floorResult:o}}}),Ne={class:"editorFloorContainer flex-start"},Ke=T("span",{class:"font-l"},"未命名-01(47.01m²）",-1),Qe={class:"font-l flex-center white"},Xe={class:"buttonContainer flex-center"},Ye=k(Ve,[["render",function(e,t,o,l,a,n){const s=W,r=p;return F(),C("div",Ne,[Ke,i(s,{readonly:"",class:"mr-1x bg-orange floorHeight",onTouchstart:t[0]||(t[0]=S((t=>e.changeCalculator("floorResult","2000")),["stop"]))},{default:M((()=>[T("span",Qe,z(e.floorResult)+"CM",1)])),_:1}),i(s,{type:"success",class:"bg-orange color-n floorSettingButton",to:"levelSetting"},{default:M((()=>[T("div",Xe,[i(r,{size:"15",class:"iconfont white","class-prefix":"icon",name:"Project"})])])),_:1})])}]]),Ze=n({name:"NameFloor",setup:()=>({px2rem:x("px2rem")})}),et={class:"nameFloorContainer"},tt=n({components:{HandleFloor:Je,EditorFloor:Ye,NameFloor:k(Ze,[["render",function(e,t,o,l,a,n){const s=te,r=se;return F(),C("div",et,[i(r,{border:!1},{default:M((()=>[i(s,{border:!1,class:"font-s p-1x",title:"1F",value:"72㎡"}),i(s,{border:!1,class:"font-s p-1x",title:"2F",value:"72㎡"}),i(s,{border:!1,class:"font-s p-1x",title:"3F",value:"72㎡"}),i(s,{border:!1,class:"font-s p-1x",title:"4F",value:"72㎡"})])),_:1})])}]]),ModelInfo:Re},setup(){A((()=>{window.loadTime=setInterval((()=>{window.editor.list&&0!==window.editor.list.pluginList._bindings.length&&p()}),100);const t=G().proxy.$router.currentRoute.value.name;e.$patch({modelType:t.toString()})}));const e=N(),t=b(!1),o=g((()=>e.showExport)),l=e.changeShowFloor,a=g((()=>e.showFloor)),n=e.changeShowFloor,s=g((()=>e.showModelInfo)),i=g((()=>e.showEditorToolRight)),r=b(J.handelBtnList),c=J.handelBtnList,u=J.modelTypeList,d=g((()=>e.modelType)),h=x("px2rem"),p=()=>{window.editor.list.pluginList.dispatch("ok"),clearInterval(window.loadTime),delete window.loadTime};return y((()=>{})),{show:t,showPopup:()=>{t.value=!0,""===d.value&&e.$patch({modelType:"model"})},handelBtnList:r,modelBtnList:c,modelTypeList:u,hidePopup:o=>{e.$patch({modelType:o}),t.value=!1},px2rem:h,showFloor:a,showHandleFloor:()=>{l()},modelType:d,handleClick:t=>{switch(t.name){case"Undo":window.editor.list.undo.dispatch();break;case"Redo":window.editor.list.redo.dispatch();break;case"3D":r.value[3].name="2D",window.editor.list.switchCamera.dispatch("3D");break;case"2D":r.value[3].name="3D",window.editor.list.switchCamera.dispatch("2D");break;case"del":break;case"清空":window.editor.list.deleteForMobile.dispatch(t.type);break;case"导出":e.$patch({showExport:!0})}},showModelInfo:s,changeShowModelInfo:n,showExport:o,showEditorToolRight:i}}}),ot={class:"editorContainer"},lt={class:"editorToolLeft",scrollbar:!0},at={class:"e-t-l-container"},nt={class:"e-t-top"},st={class:"e-t-bottom"},it={class:"editorToolCenter"},rt={class:"editorFloor-right"},ct={class:"editorToolRight"},ut={class:"e-t-r-container"},dt={class:"e-r-top"},ht={class:"e-r-bottom"};e("default",k(tt,[["render",function(e,t,o,l,a,n){const s=Ge,r=De,c=V,u=j("HandleFloor"),d=he,h=j("EditorFloor"),p=j("NameFloor"),v=Re,f=te,m=se,g=q,b=j("router-view");return F(),C("div",ot,[i(s),B(i(r,null,null,512),[[I,e.showExport]]),T("div",lt,[T("div",at,[T("div",nt,[(F(!0),C(w,null,R(e.handelBtnList,(t=>(F(),E(c,{key:t.name,"button-height":"65px",name:t.name,icon:t.icon,onClick:o=>e.handleClick(t)},null,8,["name","icon","onClick"])))),128))]),T("div",st,[i(c,{name:"楼层","button-height":"65px",class:"floorButton","class-name":e.showFloor?"orangeButton":"whiteButton","icon-margin":"8px",icon:"ziyuanFloors17",onClick:t[0]||(t[0]=t=>e.showHandleFloor())},null,8,["class-name"])])])]),B(T("div",it,[i(u),T("div",rt,[i(d),i(h),i(p)])],512),[[I,e.showFloor]]),B(i(v,null,null,512),[[I,e.showModelInfo]]),B(T("div",ct,[T("div",ut,[T("div",dt,[i(c,{icon:"youzhaixuanxiang","class-name":"titleButton","button-height":"30px",onClick:e.showPopup},null,8,["onClick"]),i(g,{show:e.show,"onUpdate:show":t[1]||(t[1]=t=>e.show=t),position:"right",overlay:!0,"overlay-style":{width:"100%",left:"0",background:"transparent"},style:U({width:e.px2rem("195px"),height:"100%"})},{default:M((()=>[i(m,null,{default:M((()=>[(F(!0),C(w,null,R(e.modelTypeList,(t=>(F(),E(f,{id:t.id,key:t.path,center:"",class:_([{active:e.modelType===t.id},"van-ellipsis"]),style:U({fontSize:e.px2rem("16px"),height:e.px2rem("44px")}),title:t.value,to:t.path,onClick:o=>e.hidePopup(t.id)},null,8,["id","class","style","title","to","onClick"])))),128))])),_:1})])),_:1},8,["show","style"])]),T("div",ht,[i(b)])])],512),[[I,e.showEditorToolRight]])])}],["__scopeId","data-v-ec63d95b"]]))}}}));

import{u as k}from"./index-eeae22b5.js";import{m as h}from"./data-b5989b8c.js";import{s as g,a as L,b as B}from"./data-c2c4f7c0.js";import{w as y,r as m,c as S}from"./index-fee02461.js";y(g);const e=m(h.roomInfo),t=m(h.wallInfo),i=m(h.drawWallInfo),u=m(B.handelBtnList),n=k(),d=S(()=>n.modelType);class M{constructor(){this.setupEventListeners()}setupEventListeners(){window.editor.list.showModelMsg.add(o=>{if(n.resetGlobalObj(),o){switch(n.changeShowModelInfo(!0,o.type),o.type){case"room":o.rotationLock?(e.value[4].icon="sisuo",e.value[4].class="checkedButton",e.value[4].lock=o.rotationLock):(e.value[4].icon="weisuoding",e.value[4].class="orangeButton",e.value[4].lock=o.rotationLock),o.positionLock?(e.value[3].icon="sisuo",e.value[3].class="checkedButton",e.value[3].lock=o.positionLock):(e.value[3].icon="weisuoding",e.value[3].class="orangeButton",e.value[3].lock=o.positionLock);break;case"wall":o.lengthLock?(t.value[2].icon="sisuo",t.value[2].class="checkedButton",t.value[2].lock=o.lengthLock):(t.value[2].icon="weisuoding",t.value[2].class="orangeButton",t.value[2].lock=o.lengthLock),o.positionLock?(t.value[3].icon="sisuo",t.value[3].class="checkedButton",t.value[3].lock=o.positionLock):(t.value[3].icon="weisuoding",t.value[3].class="orangeButton",t.value[3].lock=o.positionLock);break;case"drawWall":o.autoCompletion?(i.value[1].class="checkedButton",i.value[1].lock=o.autoCompletion):(i.value[1].class="orangeButton",i.value[1].lock=o.autoCompletion),o.hvSwitch?(i.value[2].icon="huangshuqihuan-shu",i.value[2].class="checkedButton",i.value[2].lock=o.autoCompletion):(i.value[2].icon="huangshuqihuan-moren",i.value[2].class="orangeButton",i.value[2].lock=o.autoCompletion)}n.$patch({globalObj:o})}else n.changeShowModelInfo(!1,o.type)}),window.editor.list.sendFloorParam.add(o=>{n.resetFloorParam(),o&&n.$patch({floorParam:o})}),window.editor.list.switchCameraIcon.add(o=>{o==="3D"?(u.value[4].name="2D",u.value[4].icon="2D"):o==="2D"&&(u.value[4].name="3D",u.value[4].icon="3D")}),window.editor.list.showToast.add((o,c="bottom")=>{let l;c==="bottom"?l=!0:c==="top"&&(l=!1),L({message:o,position:l?"bottom":"top"})}),window.editor.list.getDomByPoint.add((o,c,l,p)=>{window.editor.currentDom="",l==="touchEnd"&&(document.querySelector(".editorToolRight").style.display="block");let f=document.querySelectorAll(".construction_btn");l==="touchMove"&&(f=document.querySelectorAll(".e-r-bottom"));for(let v=0;v<f.length;v++){const w=f[v],r=w.getBoundingClientRect();if(!(o>=r.left&&o<=r.right&&c>=r.top&&c<=r.bottom))l==="touchMove"&&(document.querySelector(".editorToolRight").style.display="none");else{window.editor.currentDom=w;let a=w.getAttribute("use-type");if(l==="touchStart")if(d.value==="model"){let s='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 2000], [-2000, 2000]]}';a==="square"?s='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 2000], [-2000, 2000]]}':a==="lShape"?s='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 0], [0, 0], [0, 2000], [-2000, 2000]]}':a==="uShape"?s='{"roomArr":[[-2000, 2000], [-2000, -2000], [2000, -2000], [2000, 2000], [400, 2000], [400,0], [-400, 0], [-400, 2000], [-2000, 2000]]}':a==="tShape"?s='{"roomArr":[[-2000, 2000], [-2000, 0], [-1200, 0], [-1200, -2000], [1200, -2000], [1200, 0], [2000, 0], [2000, 2000], [-2000, 2000]]}':a==="sShape"&&(s='{"roomArr":[[-2000, -2000], [600, -2000], [600, 800], [2000, 800], [2000, 2000], [-600,2000], [-600, -800], [-2000, -800], [-2000,  -2000]]}'),a!="wall"&&(window.editor.selCacheJson=s)}else d.value==="door"||d.value==="window"?window.editor.toolType=a:d.value;if(l==="touchMove"){const s=document.querySelector(".e-r-bottom");s.scrollTop+=p*2}l==="touchEnd"&&a==="wall"&&(window.editor.toolType=a)}}})}}export{M as default};

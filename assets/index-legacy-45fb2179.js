System.register(["./index-legacy-0ff4abf0.js","./index-legacy-a4c13798.js","./data-legacy-e31ed8e8.js","./function-call-legacy-be959de2.js"],(function(e,l){"use strict";var t,o,a,n,s,i,r,c,u,d,h,p,v,w,m,f,g,b,x,k,y,F,C,B,I,T,_,L,S,E,M,R,P,W,z,j,D,$,H,O,A,G,U,q,J,V,N,K,Q;return{setters:[e=>{t=e.a,o=e.E,a=e.F,n=e.d,s=e.G,i=e.j,r=e.m,c=e.k,u=e.t,d=e.H,h=e.i,p=e.I,v=e.w,w=e.J,m=e.q,f=e.K,g=e.c,b=e.r,x=e.L,k=e.M,y=e._,F=e.x,C=e.y,B=e.l,I=e.O,T=e.A,_=e.P,L=e.Q,S=e.R,E=e.S,M=e.T,R=e.z,P=e.U,W=e.V,z=e.B,j=e.W,D=e.X,$=e.Y,H=e.C,O=e.D,A=e.h,G=e.Z,U=e.$,q=e.a0},e=>{J=e.b,V=e._},e=>{N=e.u,K=e.m},e=>{Q=e.a}],execute:function(){const[l,X]=t("cell"),Y={tag:r("div"),icon:String,size:String,title:c,value:c,label:c,center:Boolean,isLink:Boolean,border:u,required:Boolean,iconPrefix:String,valueClass:d,labelClass:d,titleClass:d,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Z=o({},Y,a);var ee=n({name:l,props:Z,setup(e,{slots:l}){const t=s(),o=()=>{if(l.label||h(e.label))return i("div",{class:[X("label"),e.labelClass]},[l.label?l.label():e.label])},a=()=>{var t;if(l.title||h(e.title)){const a=null==(t=l.title)?void 0:t.call(l);if(Array.isArray(a)&&0===a.length)return;return i("div",{class:[X("title"),e.titleClass],style:e.titleStyle},[a||i("span",null,[e.title]),o()])}},n=()=>{const t=l.value||l.default;if(t||h(e.value))return i("div",{class:[X("value"),e.valueClass]},[t?t():i("span",null,[e.value])])},r=()=>{if(l["right-icon"])return l["right-icon"]();if(e.isLink){const l=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return i(p,{name:l,class:X("right-icon")},null)}};return()=>{var o;const{tag:s,size:c,center:u,border:d,isLink:h,required:v}=e,w=null!=(o=e.clickable)?o:h,m={center:u,required:v,clickable:w,borderless:!d};return c&&(m[c]=!!c),i(s,{class:X(m),role:w?"button":void 0,tabindex:w?0:void 0,onClick:t},{default:()=>{var t;return[l.icon?l.icon():e.icon?i(p,{name:e.icon,class:X("left-icon"),classPrefix:e.iconPrefix},null):void 0,a(),n(),r(),null==(t=l.extra)?void 0:t.call(l)]}})}}});const le=v(ee),[te,oe]=t("cell-group"),ae={title:String,inset:Boolean,border:u};var ne=n({name:te,inheritAttrs:!1,props:ae,setup(e,{slots:l,attrs:t}){const o=()=>{var o;return i("div",m({class:[oe({inset:e.inset}),{[f]:e.border&&!e.inset}]},t),[null==(o=l.default)?void 0:o.call(l)])};return()=>e.title||l.title?i(w,null,[i("div",{class:oe("title",{inset:e.inset})},[l.title?l.title():e.title]),o()]):o()}});const se=v(ne),ie=n({setup(){const e=N(),l=g((()=>e.calculatorState)),t=g((()=>e.floorResult)),o=g((()=>e.calculatorType)),a=g((()=>e.calculatorValue)),n=e.updateInputArr,s=b(""),i=e.changeCalculator,r=J.keyList,c=x("px2rem"),u=e=>new Function(`return ${e}`)();let d=!0;const h=b("isInput");return k((()=>{s.value=a.value,d=!0,h.value="isInput"})),{px2rem:c,keyList:r,store:e,calculatorState:l,changeCalculator:i,floorResult:t,result:s,handleButtonClick:l=>{if("="===l.value)try{s.value=Math.floor(u(s.value)).toString()}catch(t){s.value="Error"}else if("AC"===l.value)s.value="";else if("CM"===l.value);else if("houtui"===l.icon)s.value=s.value.toString().slice(0,-1);else if("取消"===l.value);else if("OK"===l.value){try{s.value=Math.floor(u(s.value)).toString()}catch(t){s.value="Error"}"floorResult"===o.value?e.$patch({floorResult:s.value}):"roomWidth"===o.value?(e.$patch({globalObj:{width:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({roomWidth:s.value})):"roomHeight"===o.value?(e.$patch({globalObj:{height:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({roomHeight:s.value})):"wallWidth"===o.value?(e.$patch({globalObj:{width:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({wallWidth:s.value})):"wallHeight"===o.value?(e.$patch({globalObj:{height:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({wallHeight:s.value})):"point"===o.value?(e.$patch({globalObj:{angle:s.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({angle:s.value})):"width"===o.value?(n(o.value,s.value),window.editor.list.changeRoomByInputForMobile.dispatch({doorWidth:s.value})):"leftWidth"===o.value?(n(o.value,s.value),window.editor.list.changeRoomByInputForMobile.dispatch({doorLeftWidth:s.value})):"rightWidth"===o.value&&(n(o.value,s.value),window.editor.list.changeRoomByInputForMobile.dispatch({doorRightWidth:s.value})),i("calculator")}else""===l.value||(d&&(s.value="",d=!1,h.value=""),s.value+=l.value)},calculatorValue:a,defaultValue:d,isInput:h}}}),re={class:"calculatorState"},ce={class:"calculatorState-body"},ue={class:"key-container"},de={class:"floorInputContainer bold font-n color-n"},he=y(ie,[["render",function(e,l,t,o,a,n){const s=p,r=z;return F(),C(w,null,[B(T("div",{class:"overlay",onTouchstart:l[0]||(l[0]=_((l=>e.changeCalculator("overlay")),["stop"]))},null,544),[[I,e.calculatorState]]),B(T("div",re,[T("div",ce,[T("div",ue,[T("div",de,[B(T("input",{"onUpdate:modelValue":l[1]||(l[1]=l=>e.result=l),class:L([e.isInput,"floorInput"]),disabled:""},null,2),[[S,e.result,void 0,{trim:!0}]])]),(F(!0),C(w,null,E(e.keyList,(l=>(F(),M(r,{key:l.value,color:l.color,class:L([l.class,"calculatorState-key flex-center color-n font-s"]),type:"success",onClick:t=>e.handleButtonClick(l)},{default:R((()=>[P(W(l.value)+" ",1),i(s,{size:"15",class:"iconfont buttonIcon","class-prefix":"icon",name:l.icon},null,8,["name"])])),_:2},1032,["color","class","onClick"])))),128))])])],512),[[I,e.calculatorState]])],64)}],["__scopeId","data-v-3ed579ac"]]),pe={class:"modelInfo"},ve={class:"infoLeft"},we={class:"infoRight flex-start"},me={key:0,class:"flex-start"},fe={class:"font-l mh-2x"},ge={key:0,class:"flex-start"},be=T("span",{class:"mr-1x font-l"},"x",-1),xe={class:"buttonContainer flex-center"},ke={key:1,class:"flex-start"},ye=T("span",{class:"font-l mh-1x"},"墙",-1),Fe=T("span",{class:"mr-1x font-l"},"x",-1),Ce={class:"buttonContainer flex-center"},Be={key:2,class:"flex-start"},Ie=T("span",{class:"font-l mh-1x"},"角度",-1),Te={key:3,class:"flex-start"},_e={class:"font-l mh-1x"},Le=n({__name:"index",setup(e){const l=N();let t=[];const o=l.changeCalculator,a=l.changeShowModelInfo,n=g((()=>l.globalObj)),s=(e,l)=>{l.lock=!l.lock,e?(l.icon="sisuo",l.class="checkedButton"):(l.icon="weisuoding",l.class="orangeButton")};return k((()=>{"room"===n.value.type?t=b(K.roomInfo):"wall"===n.value.type?t=b(K.wallInfo):"drawWall"===n.value.type?t=b(K.drawWallInfo):"point"===n.value.type?t=b(K.angleInfo):"door"!==n.value.type&&"window"!==n.value.type||(t=b(K.doorWindowInfo))})),(e,r)=>{const c=V,u=z,d=p,h=he,v=j("router-view");return F(),C("div",pe,[i(v,null,{default:R((()=>[T("div",ve,[(F(!0),C(w,null,E(D(t),(e=>(F(),M(c,{key:e.name,"class-name":e.class,"button-height":"70px",name:e.name,icon:e.icon,onTouchstart:o=>(e=>{switch(e.name){case"删除":window.editor.list.deleteForMobile.dispatch("del");break;case"位置":window.editor.list.lockUnlockForMobile.dispatch({positionLock:e.lock}),s(e.lock,t.value[3]);break;case"旋转":window.editor.list.lockUnlockForMobile.dispatch({rotationLock:e.lock}),s(e.lock,t.value[4]);break;case"长度":window.editor.list.lockUnlockForMobile.dispatch({lengthLock:e.lock}),l.$patch({globalObj:{lengthLock:e.lock}}),s(e.lock,t.value[2]);break;case"拆分墙":window.editor.list.wallOperate.dispatch({type:"splitWall"});break;case"停用补全":e.lock=!e.lock,window.editor.list.setWallParam.dispatch({autoCompletion:e.lock}),e.lock?t.value[1].class="checkedButton":t.value[1].class="orangeButton",Q({message:"此功能只适用于拖拽状态",position:"bottom"});break;case"横竖切换":e.lock=!e.lock,window.editor.list.setWallParam.dispatch({hvSwitch:e.lock}),e.lock?(t.value[2].class="checkedButton",t.value[2].icon="huangshuqihuan-shu"):(t.value[2].class="orangeButton",t.value[2].icon="huangshuqihuan-moren"),Q({message:"此功能只适用于拖拽状态",position:"bottom"});break;case"取消":a(!1,"drawWall"),window.editor.list.cancelTool.dispatch()}})(e)},null,8,["class-name","name","icon","onTouchstart"])))),128))]),T("div",we,["room"===n.value.type?(F(),C("div",me,[T("span",fe,W(n.value.area)+" m²",1),n.value.width?(F(),C("div",ge,[i(u,{class:"sizeButton font-l mh-2x",onTouchstart:r[0]||(r[0]=_((e=>D(o)("roomWidth",n.value.width)),["stop"]))},{default:R((()=>[P(W(n.value.width)+"mm ",1)])),_:1}),be,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[1]||(r[1]=_((e=>D(o)("roomHeight",n.value.height)),["stop"]))},{default:R((()=>[P(W(n.value.height)+"mm ",1)])),_:1})])):$("",!0),i(u,{type:"success",class:"bg-orange color-n settingButton",to:""},{default:R((()=>[T("div",xe,[i(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])])),_:1})])):"wall"===n.value.type?(F(),C("div",ke,[ye,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[2]||(r[2]=_((e=>!n.value.lengthLock&&D(o)("wallWidth",n.value.width)),["stop"]))},{default:R((()=>[P(W(n.value.width)+"mm ",1)])),_:1}),Fe,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[3]||(r[3]=_((e=>D(o)("wallHeight",n.value.height)),["stop"]))},{default:R((()=>[P(W(n.value.height)+"mm ",1)])),_:1}),i(u,{type:"success",class:"bg-orange color-n settingButton",to:""},{default:R((()=>[T("div",Ce,[i(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])])),_:1})])):"point"===n.value.type?(F(),C("div",Be,[Ie,i(u,{class:"sizeButton font-l mr-1x",onTouchstart:r[4]||(r[4]=_((e=>D(o)("point",n.value.angle)),["stop"]))},{default:R((()=>[P(W(n.value.angle)+"° ",1)])),_:1})])):"door"===n.value.type||"window"===n.value.type?(F(),C("div",Te,[T("span",_e,W("door"===n.value.type?"门":"窗"),1),(F(!0),C(w,null,E(n.value.inputArr,(e=>(F(),M(u,{key:e.inputType,color:e.color,class:"sizeButton font-l mr-1x",onTouchstart:_((l=>!e.disabled&&D(o)(e.inputType,e.value)),["stop"])},{default:R((()=>[P(W(e.value),1)])),_:2},1032,["color","onTouchstart"])))),128))])):$("",!0),i(h)])])),_:1})])}}}),Se={setup(){const e=N();return{exportPDF:()=>{window.editor.list.exportGLTF.dispatch("mobilePDF"),e.$patch({showExport:!1})},exportJPEG:()=>{window.editor.list.exportGLTF.dispatch("jpg"),e.$patch({showExport:!1})},showExport:g((()=>e.showExport)),closeExport:()=>{e.$patch({showExport:!1})}}}},Ee=e=>(H("data-v-5106d6bb"),e=e(),O(),e),Me={class:"export"},Re={class:"exportContainer"},Pe=Ee((()=>T("div",{class:"font-l mb-2x"}," 导出为 ",-1))),We=Ee((()=>T("span",null,"PDF 文档",-1))),ze=Ee((()=>T("span",null,"JPEG 格式图片",-1))),je=y(Se,[["render",function(e,l,t,o,a,n){const s=p;return F(),C("div",Me,[T("div",Re,[Pe,T("div",{class:"font-n mb-2x",onClick:l[0]||(l[0]=e=>o.exportPDF())},[i(s,{size:"20",class:"iconfont buttonIcon mr-1x","class-prefix":"icon",name:"PDFdocument"}),We]),T("div",{class:"font-n",onClick:l[1]||(l[1]=e=>o.exportJPEG())},[i(s,{size:"20",class:"iconfont buttonIcon mr-1x","class-prefix":"icon",name:"JPEGimage"}),ze])]),T("div",{class:"exportOverlay",onClick:l[2]||(l[2]=e=>o.closeExport())})])}],["__scopeId","data-v-5106d6bb"]]),De=n({setup:()=>({})}),$e={class:"canvas_box"},He=[(e=>(H("data-v-4bd0f451"),e=e(),O(),e))((()=>T("div",{id:"box"},null,-1)))],Oe=y(De,[["render",function(e,l,t,o,a,n){return F(),C("div",$e,He)}],["__scopeId","data-v-4bd0f451"]]),Ae=n({name:"HandleFloor",setup:()=>({handleFloorList:J.handleFloorList})}),Ge={class:"handleFloorContainer bg-orange"},Ue=y(Ae,[["render",function(e,l,t,o,a,n){const s=V;return F(),C("div",Ge,[(F(!0),C(w,null,E(e.handleFloorList,(e=>(F(),M(s,{key:e.name,"class-name":"orangeButton","button-height":"70px",name:e.name,icon:e.icon},null,8,["name","icon"])))),128))])}],["__scopeId","data-v-d5343487"]]),qe=n({name:"EditorFloor",setup(){const e=x("px2rem"),l=N(),t=g((()=>l.floorResult)),o=g((()=>l.calculatorState)),a=l.changeCalculator;return{px2rem:e,calculatorState:o,store:l,changeCalculator:a,floorResult:t}}}),Je={class:"editorFloorContainer flex-start"},Ve=T("span",{class:"font-l"},"未命名-01(47.01m²）",-1),Ne={class:"font-l flex-center white"},Ke={class:"buttonContainer flex-center"},Qe=y(qe,[["render",function(e,l,t,o,a,n){const s=z,r=p;return F(),C("div",Je,[Ve,i(s,{readonly:"",class:"mr-1x bg-orange floorHeight",onTouchstart:l[0]||(l[0]=_((l=>e.changeCalculator("floorResult","2000")),["stop"]))},{default:R((()=>[T("span",Ne,W(e.floorResult)+"CM",1)])),_:1}),i(s,{type:"success",class:"bg-orange color-n floorSettingButton",to:"levelSetting"},{default:R((()=>[T("div",Ke,[i(r,{size:"15",class:"iconfont white","class-prefix":"icon",name:"Project"})])])),_:1})])}]]),Xe=n({name:"NameFloor",setup:()=>({px2rem:x("px2rem")})}),Ye={class:"nameFloorContainer"},Ze=n({components:{HandleFloor:Ue,EditorFloor:Qe,NameFloor:y(Xe,[["render",function(e,l,t,o,a,n){const s=le,r=se;return F(),C("div",Ye,[i(r,{border:!1},{default:R((()=>[i(s,{border:!1,class:"font-s p-1x",title:"1F",value:"72㎡"}),i(s,{border:!1,class:"font-s p-1x",title:"2F",value:"72㎡"}),i(s,{border:!1,class:"font-s p-1x",title:"3F",value:"72㎡"}),i(s,{border:!1,class:"font-s p-1x",title:"4F",value:"72㎡"})])),_:1})])}]]),ModelInfo:Le},setup(){A((()=>{window.loadTime=setInterval((()=>{window.editor.list&&0!==window.editor.list.pluginList._bindings.length&&p()}),100),G().replace("/model")}));const e=N(),l=b(!1),t=g((()=>e.showExport)),o=e.changeShowFloor,a=g((()=>e.showFloor)),n=e.changeShowFloor,s=g((()=>e.showModelInfo)),i=g((()=>e.showEditorToolRight)),r=b(J.handelBtnList),c=J.handelBtnList,u=J.modelTypeList,d=g((()=>e.modelType)),h=x("px2rem"),p=()=>{window.editor.list.pluginList.dispatch("ok"),clearInterval(window.loadTime),delete window.loadTime};return k((()=>{})),{show:l,showPopup:()=>{l.value=!0,""===d.value&&e.$patch({modelType:"model"})},handelBtnList:r,modelBtnList:c,modelTypeList:u,hidePopup:t=>{e.$patch({modelType:t}),l.value=!1},px2rem:h,showFloor:a,showHandleFloor:()=>{o()},modelType:d,handleClick:l=>{switch(l.name){case"Undo":window.editor.list.undo.dispatch();break;case"Redo":window.editor.list.redo.dispatch();break;case"3D":r.value[3].name="2D",window.editor.list.switchCamera.dispatch("3D");break;case"2D":r.value[3].name="3D",window.editor.list.switchCamera.dispatch("2D");break;case"del":break;case"清空":window.editor.list.deleteForMobile.dispatch(l.type);break;case"导出":e.$patch({showExport:!0})}},showModelInfo:s,changeShowModelInfo:n,showExport:t,showEditorToolRight:i}}}),el={class:"editorContainer"},ll={class:"editorToolLeft",scrollbar:!0},tl={class:"e-t-l-container"},ol={class:"e-t-top"},al={class:"e-t-bottom"},nl={class:"editorToolCenter"},sl={class:"editorFloor-right"},il={class:"editorToolRight"},rl={class:"e-t-r-container"},cl={class:"e-r-top"},ul={class:"e-r-bottom"};e("default",y(Ze,[["render",function(e,l,t,o,a,n){const s=Oe,r=je,c=V,u=j("HandleFloor"),d=he,h=j("EditorFloor"),p=j("NameFloor"),v=Le,m=le,f=se,g=q,b=j("router-view");return F(),C("div",el,[i(s),B(i(r,null,null,512),[[I,e.showExport]]),T("div",ll,[T("div",tl,[T("div",ol,[(F(!0),C(w,null,E(e.handelBtnList,(l=>(F(),M(c,{key:l.name,"button-height":"65px",name:l.name,icon:l.icon,onClick:t=>e.handleClick(l)},null,8,["name","icon","onClick"])))),128))]),T("div",al,[i(c,{name:"楼层","button-height":"65px",class:"floorButton","class-name":e.showFloor?"orangeButton":"whiteButton","icon-margin":"8px",icon:"ziyuanFloors17",onClick:l[0]||(l[0]=l=>e.showHandleFloor())},null,8,["class-name"])])])]),B(T("div",nl,[i(u),T("div",sl,[i(d),i(h),i(p)])],512),[[I,e.showFloor]]),B(i(v,null,null,512),[[I,e.showModelInfo]]),B(T("div",il,[T("div",rl,[T("div",cl,[i(c,{icon:"youzhaixuanxiang","class-name":"titleButton","button-height":"30px",onClick:e.showPopup},null,8,["onClick"]),i(g,{show:e.show,"onUpdate:show":l[1]||(l[1]=l=>e.show=l),position:"right",overlay:!0,"overlay-style":{width:"100%",left:"0",background:"transparent"},style:U({width:e.px2rem("195px"),height:"100%"})},{default:R((()=>[i(f,null,{default:R((()=>[(F(!0),C(w,null,E(e.modelTypeList,(l=>(F(),M(m,{id:l.id,key:l.path,center:"",class:L([{active:e.modelType===l.id},"van-ellipsis"]),style:U({fontSize:e.px2rem("16px"),height:e.px2rem("44px")}),title:l.value,to:l.path,onClick:t=>e.hidePopup(l.id)},null,8,["id","class","style","title","to","onClick"])))),128))])),_:1})])),_:1},8,["show","style"])]),T("div",ul,[i(b)])])],512),[[I,e.showEditorToolRight]])])}],["__scopeId","data-v-d7dba05a"]]))}}}));

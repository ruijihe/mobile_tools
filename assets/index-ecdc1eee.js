import{c as X,E as ae,F as ce,d as b,G as ie,h as n,m as re,j as E,t as Y,H as U,i as W,I as z,q as Z,J as C,p as ue,K as de,a as k,r as A,L as V,M as _e,_ as S,x as _,y as m,k as P,O as D,A as c,P as L,Q as he,R as H,S as O,z as w,T as I,U as F,V as ee,B as j,W as pe,X as M,Y as T,Z as q,C as ve,D as fe,f as me,$ as K,a0 as we}from"./index-14f85167.js";import{b as R,_ as G}from"./index-3d6af1d9.js";import{u as N,m as J}from"./data-1d9bce21.js";const[ge,B]=X("cell"),$e={tag:re("div"),icon:String,size:String,title:E,value:E,label:E,center:Boolean,isLink:Boolean,border:Y,required:Boolean,iconPrefix:String,valueClass:U,labelClass:U,titleClass:U,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},ke=ae({},$e,ce);var be=b({name:ge,props:ke,setup(e,{slots:o}){const r=ie(),i=()=>{if(o.label||W(e.label))return n("div",{class:[B("label"),e.labelClass]},[o.label?o.label():e.label])},s=()=>{var t;if(o.title||W(e.title)){const p=(t=o.title)==null?void 0:t.call(o);return Array.isArray(p)&&p.length===0?void 0:n("div",{class:[B("title"),e.titleClass],style:e.titleStyle},[p||n("span",null,[e.title]),i()])}},l=()=>{const t=o.value||o.default;if(t||W(e.value))return n("div",{class:[B("value"),e.valueClass]},[t?t():n("span",null,[e.value])])},u=()=>{if(o.icon)return o.icon();if(e.icon)return n(z,{name:e.icon,class:B("left-icon"),classPrefix:e.iconPrefix},null)},a=()=>{if(o["right-icon"])return o["right-icon"]();if(e.isLink){const t=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return n(z,{name:t,class:B("right-icon")},null)}};return()=>{var t;const{tag:p,size:v,center:d,border:g,isLink:x,required:f}=e,y=(t=e.clickable)!=null?t:x,$={center:d,required:f,clickable:y,borderless:!g};return v&&($[v]=!!v),n(p,{class:B($),role:y?"button":void 0,tabindex:y?0:void 0,onClick:r},{default:()=>{var h;return[u(),s(),l(),a(),(h=o.extra)==null?void 0:h.call(o)]}})}}});const oe=Z(be),[ye,Q]=X("cell-group"),xe={title:String,inset:Boolean,border:Y};var Fe=b({name:ye,inheritAttrs:!1,props:xe,setup(e,{slots:o,attrs:r}){const i=()=>{var l;return n("div",ue({class:[Q({inset:e.inset}),{[de]:e.border&&!e.inset}]},r),[(l=o.default)==null?void 0:l.call(o)])},s=()=>n("div",{class:Q("title",{inset:e.inset})},[o.title?o.title():e.title]);return()=>e.title||o.title?n(C,null,[s(),i()]):i()}});const te=Z(Fe);const Ce=b({setup(){const e=N(),o=k(()=>e.calculatorState),r=k(()=>e.floorResult),i=k(()=>e.calculatorType),s=k(()=>e.calculatorValue),l=A(""),u=e.changeCalculator,a=R.keyList,t=V("px2rem"),p=d=>{const g=Function;return new g(`return ${d}`)()},v=d=>{if(d.value==="=")try{l.value=p(l.value).toFixed(1).toString()}catch(g){l.value="Error"}else d.value==="AC"?l.value="":d.value==="CM"||d.value==="CM"||(d.icon==="houtui"?l.value=l.value.slice(0,-1):d.value==="取消"||(d.value==="OK"?(i.value==="floorResult"?e.$patch({floorResult:l.value}):i.value==="roomWidth"?(e.$patch({globalObj:{width:l.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({roomWidth:l.value})):i.value==="roomHeight"?(e.$patch({globalObj:{height:l.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({roomHeight:l.value})):i.value==="wallWidth"?(e.$patch({globalObj:{width:l.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({wallWidth:l.value})):i.value==="wallHeight"&&(e.$patch({globalObj:{height:l.value}}),window.editor.list.changeRoomByInputForMobile.dispatch({wallHeight:l.value})),u("calculator","")):d.value===""||(l.value+=d.value)))};return _e(()=>{s.value!==null&&(l.value=s.value)}),{px2rem:t,keyList:a,store:e,calculatorState:o,changeCalculator:u,floorResult:r,result:l,handleButtonClick:v,calculatorValue:s}}});const Be={class:"calculatorState"},Le={class:"calculatorState-body"},Se={class:"key-container"};function Te(e,o,r,i,s,l){const u=z,a=j;return _(),m(C,null,[P(c("div",{class:"overlay",onTouchstart:o[0]||(o[0]=L(t=>e.changeCalculator("overlay",""),["stop"]))},null,544),[[D,e.calculatorState]]),P(c("div",Be,[c("div",Le,[c("div",Se,[P(c("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.result=t),class:"floorInput bold font-n color-n",readonly:""},null,512),[[he,e.result,void 0,{trim:!0}]]),(_(!0),m(C,null,H(e.keyList,t=>(_(),O(a,{key:t.value,color:t.color,class:ee([t.class,"calculatorState-key flex-center color-n font-s"]),type:"success",onClick:p=>e.handleButtonClick(t)},{default:w(()=>[I(F(t.value)+" ",1),n(u,{size:"15",class:"iconfont buttonIcon","class-prefix":"icon",name:t.icon},null,8,["name"])]),_:2},1032,["color","class","onClick"]))),128))])])],512),[[D,e.calculatorState]])],64)}const ne=S(Ce,[["render",Te],["__scopeId","data-v-e503186d"]]),Ie={class:"modelInfo"},Me={class:"infoLeft"},Pe={class:"infoRight flex-start"},Re={key:0,class:"flex-start"},ze={class:"font-l mh-2x"},He={key:0,class:"flex-start"},Oe=c("span",{class:"mr-1x font-l"},"x",-1),Ae={class:"buttonContainer flex-center"},De={key:1,class:"flex-start"},Ve=c("span",{class:"font-l mh-1x"},"墙",-1),Ne=c("span",{class:"mr-1x font-l"},"x",-1),Ee={class:"buttonContainer flex-center"},le=b({__name:"index",setup(e){const o=N();let r=[];const i=o.changeCalculator,s=k(()=>o.globalObj),l=(a,t)=>{t.lock=!t.lock,a?(t.icon="sisuo",t.class="checkedButton"):(t.icon="weisuoding",t.class="orangeButton")},u=a=>{switch(a.name){case"删除":window.editor.list.deleteForMobile.dispatch("del");break;case"锁定":window.editor.list.lockUnlockForMobile.dispatch({positionLock:a.lock}),l(a.lock,r.value[3]);break;case"旋转解锁":window.editor.list.lockUnlockForMobile.dispatch({rotationLock:a.lock}),l(a.lock,r.value[4]);break;case"长度":window.editor.list.lockUnlockForMobile.dispatch({lengthLock:a.lock}),l(a.lock,r.value[2]);break;case"位置":window.editor.list.lockUnlockForMobile.dispatch({positionLock:a.lock}),l(a.lock,r.value[3]);break}};return pe(()=>{s.value.type==="room"?r=A(J.roomInfo):s.value.type==="wall"&&(r=A(J.wallInfo))}),(a,t)=>{const p=G,v=j,d=z,g=ne,x=M("router-view");return _(),m("div",Ie,[n(x,null,{default:w(()=>[c("div",Me,[(_(!0),m(C,null,H(T(r),f=>(_(),O(p,{key:f.name,"class-name":f.class,"button-height":"70px",name:f.name,icon:f.icon,onTouchstart:y=>u(f)},null,8,["class-name","name","icon","onTouchstart"]))),128))]),c("div",Pe,[s.value.type==="room"?(_(),m("div",Re,[c("span",ze,F(s.value.area)+" m²",1),s.value.width?(_(),m("div",He,[n(v,{class:"sizeButton font-l mh-2x",onTouchstart:t[0]||(t[0]=L(f=>T(i)("roomWidth",s.value.width),["stop"]))},{default:w(()=>[I(F(s.value.width)+"mm ",1)]),_:1}),Oe,n(v,{class:"sizeButton font-l mr-1x",onTouchstart:t[1]||(t[1]=L(f=>T(i)("roomHeight",s.value.height),["stop"]))},{default:w(()=>[I(F(s.value.height)+"mm ",1)]),_:1})])):q("",!0),n(v,{type:"success",class:"bg-orange color-n settingButton",to:""},{default:w(()=>[c("div",Ae,[n(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])]),_:1})])):s.value.type==="wall"?(_(),m("div",De,[Ve,n(v,{class:"sizeButton font-l mr-1x",onTouchstart:t[2]||(t[2]=L(f=>T(i)("wallWidth",s.value.width),["stop"]))},{default:w(()=>[I(F(s.value.width)+"mm ",1)]),_:1}),Ne,n(v,{class:"sizeButton font-l mr-1x",onTouchstart:t[3]||(t[3]=L(f=>T(i)("wallHeight",s.value.height),["stop"]))},{default:w(()=>[I(F(s.value.height)+"mm ",1)]),_:1}),n(v,{type:"success",class:"bg-orange color-n settingButton",to:""},{default:w(()=>[c("div",Ee,[n(d,{size:"15",class:"iconfont","class-prefix":"icon",name:"Project"})])]),_:1})])):q("",!0),n(g)])]),_:1})])}}}),Ue=b({setup(){return{}}});const We=e=>(ve("data-v-4bd0f451"),e=e(),fe(),e),je={class:"canvas_box"},Ge=We(()=>c("div",{id:"box"},null,-1)),qe=[Ge];function Ke(e,o,r,i,s,l){return _(),m("div",je,qe)}const Je=S(Ue,[["render",Ke],["__scopeId","data-v-4bd0f451"]]),Qe=b({name:"HandleFloor",setup(){return{handleFloorList:R.handleFloorList}}});const Xe={class:"handleFloorContainer bg-orange"};function Ye(e,o,r,i,s,l){const u=G;return _(),m("div",Xe,[(_(!0),m(C,null,H(e.handleFloorList,a=>(_(),O(u,{key:a.name,"class-name":"orangeButton","button-height":"70px",name:a.name,icon:a.icon},null,8,["name","icon"]))),128))])}const Ze=S(Qe,[["render",Ye],["__scopeId","data-v-d5343487"]]),eo=b({name:"EditorFloor",setup(){const e=V("px2rem"),o=N(),r=k(()=>o.floorResult),i=k(()=>o.calculatorState),s=o.changeCalculator;return{px2rem:e,calculatorState:i,store:o,changeCalculator:s,floorResult:r}}}),oo={class:"editorFloorContainer flex-start"},to=c("span",{class:"font-l"},"未命名-01(47.01m²）",-1),no={class:"font-l flex-center white"},lo={class:"buttonContainer flex-center"};function so(e,o,r,i,s,l){const u=j,a=z;return _(),m("div",oo,[to,n(u,{readonly:"",class:"mr-1x bg-orange floorHeight",onTouchstart:o[0]||(o[0]=L(t=>e.changeCalculator("floorResult",""),["stop"]))},{default:w(()=>[c("span",no,F(e.floorResult)+"CM",1)]),_:1}),n(u,{type:"success",class:"bg-orange color-n floorSettingButton",to:"levelSetting"},{default:w(()=>[c("div",lo,[n(a,{size:"15",class:"iconfont white","class-prefix":"icon",name:"Project"})])]),_:1})])}const ao=S(eo,[["render",so]]),co=b({name:"NameFloor",setup(){return{px2rem:V("px2rem")}}}),io={class:"nameFloorContainer"};function ro(e,o,r,i,s,l){const u=oe,a=te;return _(),m("div",io,[n(a,{border:!1},{default:w(()=>[n(u,{border:!1,class:"font-s p-1x",title:"1F",value:"72㎡"}),n(u,{border:!1,class:"font-s p-1x",title:"2F",value:"72㎡"}),n(u,{border:!1,class:"font-s p-1x",title:"3F",value:"72㎡"}),n(u,{border:!1,class:"font-s p-1x",title:"4F",value:"72㎡"})]),_:1})])}const uo=S(co,[["render",ro]]),_o=b({components:{HandleFloor:Ze,EditorFloor:ao,NameFloor:uo,ModelInfo:le},setup(){me(()=>{window.loadTime=setInterval(()=>{!window.editor.list||window.editor.list.pluginList._bindings.length===0||y()},100)});const e=N(),o=A(!1),r=e.changeShowFloor,i=k(()=>e.showFloor),s=e.changeShowFloor,l=k(()=>e.showModelInfo),u=R.handelBtnList,a=R.handelBtnList,t=R.modelTypeList,p=k(()=>e.modelType),v=V("px2rem"),d=()=>{o.value=!0,p.value===""&&e.$patch({modelType:"model"})},g=$=>{e.$patch({modelType:$}),o.value=!1},x=()=>{r()},f=$=>{switch($){case"undo":window.editor.list.undo.dispatch();break;case"redo":window.editor.list.redo.dispatch();break;case"del":case"delAll":window.editor.list.deleteForMobile.dispatch($);break;case"export":window.editor.list.exportGLTF.dispatch("pdf")}},y=()=>{window.editor.list.pluginList.dispatch("ok"),clearInterval(window.loadTime),delete window.loadTime};return{show:o,showPopup:d,handelBtnList:u,modelBtnList:a,modelTypeList:t,hidePopup:g,px2rem:v,showFloor:i,showHandleFloor:x,modelType:p,handleClick:f,showModelInfo:l,changeShowModelInfo:s}}});const ho={class:"editorContainer"},po={class:"editorToolLeft",scrollbar:!0},vo={class:"e-t-l-container"},fo={class:"e-t-top"},mo={class:"e-t-bottom"},wo={class:"editorToolCenter"},go={class:"editorFloor-right"},$o={class:"editorToolRight"},ko={class:"e-t-r-container"},bo={class:"e-r-top"},yo={class:"e-r-bottom"};function xo(e,o,r,i,s,l){const u=Je,a=G,t=M("HandleFloor"),p=ne,v=M("EditorFloor"),d=M("NameFloor"),g=le,x=oe,f=te,y=we,$=M("router-view");return _(),m("div",ho,[n(u),c("div",po,[c("div",vo,[c("div",fo,[(_(!0),m(C,null,H(e.handelBtnList,h=>(_(),O(a,{key:h.name,"button-height":"65px",name:h.name,icon:h.icon,onClick:se=>e.handleClick(h.type)},null,8,["name","icon","onClick"]))),128))]),c("div",mo,[n(a,{name:"楼层","button-height":"65px",class:"floorButton","class-name":e.showFloor?"orangeButton":"whiteButton","icon-margin":"8px",icon:"ziyuanFloors17",onClick:o[0]||(o[0]=h=>e.showHandleFloor())},null,8,["class-name"])])])]),P(c("div",wo,[n(t),c("div",go,[n(p),n(v),n(d)])],512),[[D,e.showFloor]]),P(n(g,null,null,512),[[D,e.showModelInfo]]),c("div",$o,[c("div",ko,[c("div",bo,[n(a,{icon:"youzhaixuanxiang","class-name":"titleButton","button-height":"30px",onClick:e.showPopup},null,8,["onClick"]),n(y,{show:e.show,"onUpdate:show":o[1]||(o[1]=h=>e.show=h),position:"right",overlay:!0,"overlay-style":{width:"100%",left:"0",background:"transparent"},style:K({width:e.px2rem("195px"),height:"100%"})},{default:w(()=>[n(f,null,{default:w(()=>[(_(!0),m(C,null,H(e.modelTypeList,h=>(_(),O(x,{id:h.id,key:h.path,center:"",class:ee([{active:e.modelType===h.id},"van-ellipsis"]),style:K({fontSize:e.px2rem("16px"),height:e.px2rem("44px")}),title:h.value,to:h.path,onClick:se=>e.hidePopup(h.id)},null,8,["id","class","style","title","to","onClick"]))),128))]),_:1})]),_:1},8,["show","style"])]),c("div",yo,[n($)])])])])}const Lo=S(_o,[["render",xo],["__scopeId","data-v-09aa7175"]]);export{Lo as default};
